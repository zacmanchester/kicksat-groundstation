{
  "name": "socketio-file-upload",
  "version": "0.2.7",
  "description": "Uploads files to a Node.JS server using Socket.IO",
  "keywords": [
    "upload",
    "uploader",
    "socket",
    "socket.io"
  ],
  "dependencies": {
    "socket.io": "*"
  },
  "files": [
    "client.js",
    "client.min.js",
    "server.js",
    "README.md"
  ],
  "main": "server.js",
  "repository": {
    "type": "git",
    "url": "git://github.com/vote539/socketio-file-upload.git"
  },
  "homepage": "https://github.com/vote539/socketio-file-upload",
  "author": {
    "name": "Shane Carr",
    "email": "shane.carr@wustl.edu"
  },
  "license": "X11",
  "readmeFilename": "README.md",
  "scripts": {
    "start": "node server.js"
  },
  "readme": "Socket.IO File Upload\n=====================\n\nThis module provides functionality to upload files from a browser to a Node.JS server that runs Socket.IO.  Throughout the process, if their browser supports WebSockets, the user will not submit a single HTTP request.\n\nThe intended audience are single-page web apps, but other types of Node.JS projects may benefit from this library.\n\nThe module is released under the X11 open-source license.\n\n**Table of Contents**\n\n- [Installation](#installation)\n- [Client-Side Interface](#client-side-interface)\n    - [instance.listenOnInput(input)](#instancelistenoninputinput)\n    - [instance.listenOnDrop(element)](#instancelistenondropelement)\n    - [instance.listenOnSubmit(submitButton, input)](#instancelistenonsubmitsubmitbutton-input)\n    - [instance.listenOnArraySubmit(submitButton, input[])](#instancelistenonarraysubmitsubmitbutton-input)\n    - [instance.prompt()](#instanceprompt)\n    - [instance.destroy()](#instancedestroy)\n    - [instance.useText = false](#instanceusetext--false)\n    - [instance.serializeOctets = false](#instanceserializeoctets--false)\n- [Client-Side Events](#events)\n    - [choose](#choose)\n    - [start](#start)\n    - [load](#load)\n    - [complete](#complete)\n- [Server-Side Interface](#server-side-interface)\n    - [SocketIOFileUploadServer.listen(app)](#socketiofileuploadserverlistenapp)\n    - [SocketIOFileUploadServer.router](#socketiofileuploadserverrouter)\n    - [instance.listen(socket)](#instancelistensocket)\n    - [instance.dir = \"/path/to/upload/directory\"](#instancedir--pathtouploaddirectory)\n    - [instance.mode = \"0666\"](#instancemode--0666)\n- [Server-Side Events](#events-1)\n    - [start](#start-1)\n    - [progress](#progress)\n    - [complete](#complete-1)\n    - [saved](#saved)\n    - [error](#error)\n- [Example](#example)\n\n## Installation\n\nNavigate to your project directory and run:\n\n    $ npm install socketio-file-upload\n\n## Client-Side Interface\n\nThe client-side interface is inside the `SocketIOFileUpload` namespace.  Include it with:\n\n    <script src=\"/siofu/client.js\"></script>\n\nWhen instantiating an instance of the `SocketIOFileUpload`, pass a reference to your socket.  See the Examples section.\n\n### Public Properties and Methods\n\n#### instance.listenOnInput(input)\n\nWhen the user selects a file or files in the specified HTML Input Element, the library will begin to upload that file or those files.\n\nJavaScript:\n\n    instance.listenOnInput(document.getElementById(\"file_input\"));\n\nHTML:\n\n    <label>Upload File: <input type=\"file\" id=\"file_input\" /></label>\n\nAll browsers tested support this method.\n\n#### instance.listenOnDrop(element)\n\nWhen the user drags and drops a file or files onto the specified HTML Element, the library will begin to upload that file or those files.\n\nJavaScript:\n\n    instance.listenOnDrop(document.getElementById(\"file_drop\"));\n\nHTML:\n\n    <div id=\"file_drop\">Drop Files Here</div>\n\nIn order to work, this method requires a browser that supports the HTML5 drag-and-drop interface.\n\n#### instance.listenOnSubmit(submitButton, input)\n\nLike `instance.listenOnInput(input)`, except instead of listening for the \"change\" event on the input element, listen for the \"click\" event of a button.\n\nJavaScript:\n\n    instance.listenOnSubmit(document.getElementById(\"my_button\"), document.getElementById(\"file_input\"));\n\nHTML:\n\n    <label>Upload File: <input type=\"file\" id=\"file_input\" /></label>\n    <button id=\"my_button\">Upload File</button>\n\n#### instance.listenOnArraySubmit(submitButton, input[])\n\nA shorthand for running `instance.listenOnSubmit(submitButton, input)` repeatedly over multiple file input elements.  Accepts an array of file input elements as the second argument.\n\n#### instance.prompt()\n\nWhen this method is called, the user will be prompted to choose a file to upload.\n\nJavaScript:\n\n    document.getElementById(\"file_button\").addEventListener(\"click\", instance.prompt, false);\n\nHTML:\n\n    <button id=\"file_button\">Upload File</button>\n\nUnfortunately, this method does not work in Firefox for security reasons.  Read the code comments for more information.\n\n#### instance.destroy()\n\nUnbinds all events and DOM elements created by this instance of SIOFU.\n\n**Important Memory Note:** In order to remove the instance of SIOFU from memory, you need to do at least three things:\n\n1. Remove all `siofu.prompt` event listeners *and then*\n2. Call this function *and then*\n3. Set this reference (and all references) to the instance to `null`\n\nFor example, if you created an instance like this:\n\n    // ...\n    var instance = new SocketIOFileUpload(socket);\n    myBtn.addEventListener(\"click\", instance.prompt, false);\n    // ...\n\nthen you can remove it from memory like this:\n\n    myBtn.removeEventListener(\"click\", instance.prompt, false);\n    instance.destroy();\n    instance = null;\n\n#### instance.useText = false\n\nDefaults to `false`, which reads files as an octet array.  This is necessary for binary-type files, like images.\n\nSet to `true` to read and transmit files as plain text instead.  This will save bandwidth if you expect to transmit only text files.  If you choose this option, it is recommended that you perform a filter by returning `false` to a `start` event if the file does not have a desired extension.\n\n#### instance.serializeOctets = false\n\nDefaults to `false`, which transmits binary files as Base 64 data (with a 33% overhead).\n\nSet to `true` to instead transmit the data as a serialized octet array.  This will result in an overhead of over 1000% (not recommended for production applications).\n\n*Note:* This option is not supported by Firefox.\n\n### Events\n\nInstances of the `SocketIOFileUpload` object implement the [W3C `EventTarget` interface](http://www.w3.org/wiki/DOM/domcore/EventTarget).  This means that you can do:\n\n* `instance.addEventListener(\"type\", callback)`\n* `instance.removeEventListener(\"type\", callback)`\n* `instance.dispatchEvent(event)`\n\nThe events are documented below.\n\n#### choose\n\nThe user has chosen files to upload, through any of the channels you have implemented.  If you want to cancel the upload, make your callback return `false`.\n\n##### Event Properties\n\n* `event.files` an instance of a W3C FileList object\n\n#### start\n\nThis event is fired immediately following the `choose` event, but once per file.  If you want to cancel the upload for this individual file, make your callback return `false`.\n\n##### Event Properties\n\n* `event.file` an instance of a W3C File object\n\n#### load\n\nA file has been loaded into an instance of the HTML5 FileReader object and has been transmitted through Socket.IO.  We are awaiting a response from the server about whether the upload was successful; when we receive this response, a `complete` event will be dispatched.\n\n##### Event Properties\n\n* `event.file` an instance of a W3C File object\n* `event.reader` an instance of a W3C FileReader object\n* `event.name` the filename to which the server saved the file\n\n#### complete\n\nThe server has received our file.\n\n##### Event Properties\n\n* `event.file` an instance of a W3C File object\n* `event.success` true if the server-side implementation ran without error; false otherwise\n* `event.detail` The value of `file.clientDetail` on the server side.  Properties may be added to this object literal during any event on the server side.\n\n## Server-Side Interface\n\nThe server-side interface is contained within an NPM module.  Require it with:\n\n    var SocketIOFileUploadServer = require(\"socketio-file-upload\");\n\n### Static Properties and Methods\n\n#### SocketIOFileUploadServer.listen(app)\n\nIf you are using an HTTP server in Node, pass it into this method in order for the client-side JavaScript file to be served.\n\n    var app = http.createServer( /* your configurations here */ ).listen(80);\n    SocketIOFileUploadServer.listen(app);\n\n#### SocketIOFileUploadServer.router\n\nIf you are using Connect-based middleware like Express, pass this value into the middleware.\n\n    var app = express()\n                .use(SocketIOFileUploadServer.router)\n                .use( /* your other middleware here */ )\n                .listen(80);\n\n### Public Properties and Methods\n\n#### instance.listen(socket)\n\nListen for uploads occuring on this Socket.IO socket.\n\n    io.sockets.on(\"connection\", function(socket){\n        var uploader = new SocketIOFileUploadServer();\n        uploader.listen(socket);\n    });\n\n#### instance.dir = \"/path/to/upload/directory\"\n\nIf specified, the module will attempt to save uploaded files in this directory.  The module will inteligently suffix numbers to the uploaded filenames until name conflicts are resolved.  It will also sanitize the filename to help prevent attacks.\n\nThe last-modified time of the file might be retained from the upload.  If this is of high importance to you, I recommend performing some tests, and if it does not meet your needs, submit an issue or a pull request.\n\n#### instance.mode = \"0666\"\n\nUse these UNIX permissions when saving the uploaded file.  Defaults to `0666`.\n\n### Events\n\nInstances of `SocketIOFileUploadServer` implement [Node's `EventEmitter` interface](http://nodejs.org/api/events.html#events_class_events_eventemitter).  This means that you can do:\n\n* `instance.on(\"type\", callback)`\n* `instance.removeListener(\"type\", callback)`\n* `instance.emit(\"type\", event)`\n* et cetera.\n\nThe events are documented below.\n\n#### start\n\nThe client has started the upload process.\n\n##### Event Properties\n\n* `event.file` An object containing the file's `name`, `mtime`, `encoding`, and `id`.\n    *Note:* `encoding` is either \"text\" if the file is being transmitted as plain text or \"octet\" if it is being transmitted using an ArrayBuffer.  *Note:* In the \"progress\", \"complete\", \"saved\", and \"error\" events, if you are letting the module save the file for you, the file object will contain two additional properties: `base`, the new base name given to the file, and `pathName`, the full path at which the uploaded file was saved.\n\n#### progress\n\nData has been received from the client.\n\n##### Event Properties\n\n* `event.file` The same file object that would have been passed during the `start` event earlier.\n* `event.buffer` A buffer containing the data received from the client\n\n#### complete\n\nThe transmission of a file is complete.\n\n##### Event Properties\n\n* `event.file` The same file object that would have been passed during the `start` event earlier.\n* `event.interrupt` true if the client said that the data was interrupted (not completely sent); false otherwise\n\n#### saved\n\nA file has been successfully saved.\n\n##### Event Properties\n\n* `event.file` The same file object that would have been passed during the `start` event earlier.\n\n#### error\n\nAn error was encountered in the saving of the file.\n\n##### Event Properties\n\n* `event.file` The same file object that would have been passed during the `start` event earlier.\n* `event.error` The I/O error that was encountered.\n\n## Example\n\nThis example assumes that you are running your application via the Connect middleware, including Express.  If you are using a middleware that is not Connect-based or Node-HTTP-based, download the `client.js` file from the project repository and serve it on the path `/siofu/client.js`.  Alternatively, you may contribute an adapter for your middleware to this project and submit a pull request.\n\n### Server Code: app.js\n\n    // Require the libraries:\n    var SocketIOFileUploadServer = require('socketio-file-upload'),\n        socketio = require('socket.io'),\n        express = require('express');\n\n    // Make your Express server:\n    var app = express()\n        .use(SocketIOFileUploadServer.router)\n        .use(express.static(__dirname + \"/public\"))\n        .listen(80);\n\n    // Start up Socket.IO:\n    var io = socketio.listen(app);\n    io.sockets.on(\"connection\", function(socket){\n\n        // Make an instance of SocketIOFileUploadServer and listen on this socket:\n        var uploader = new SocketIOFileUploadServer();\n        uploader.dir = \"/srv/uploads\";\n        uploader.listen(socket);\n\n        // Do something when a file is saved:\n        uploader.on(\"saved\", function(event){\n            console.log(event.file);\n        });\n\n        // Error handler:\n        uploader.on(\"error\", function(event){\n            console.log(\"Error from uploader\", event);\n        });\n    });\n\n### Client Code: public/index.html\n\n    <!DOCTYPE html>\n    <html>\n    <head>\n    <title>Upload Files</title>\n    <script src=\"/siofu/client.js\"></script>\n    <script src=\"/socket.io/socket.io.js\"></script>\n\n    <script type=\"text/javascript\">\n    document.addEventListener(\"DOMContentLoaded\", function(){\n\n        // Initialize instances:\n        var socket = io.connect();\n        var siofu = new SocketIOFileUpload(socket);\n\n        // Configure the three ways that SocketIOFileUpload can read files:\n        document.getElementById(\"upload_btn\").addEventListener(\"click\", siofu.prompt, false);\n        siofu.listenOnInput(document.getElementById(\"upload_input\"));\n        siofu.listenOnDrop(document.getElementById(\"file_drop\"));\n\n        // Do something when a file is uploaded:\n        siofu.addEventListener(\"complete\", function(event){\n            console.log(event.success);\n            console.log(event.file);\n        });\n\n    }, false);\n    </script>\n\n    </head>\n    <body>\n\n    <p><button id=\"upload_btn\">Prompt for File</button></p>\n    <p><label>Choose File: <input type=\"file\" id=\"upload_input\"/></label></p>\n    <div id=\"file_drop\" dropzone=\"copy\" title=\"drop files for upload\">Drop File</div>\n\n    </body>\n    </html>\n\n## Future Inovations\n\nI hope to one day see this project implement the following features.\n\n* Upload Progress.  There are examples of this on the net, so it should be feasible to implement.\n* Allow input of a file URL rather than uploading a file from your computer or mobile device.\n",
  "bugs": {
    "url": "https://github.com/vote539/socketio-file-upload/issues"
  },
  "_id": "socketio-file-upload@0.2.7",
  "dist": {
    "shasum": "98d6d3de8e879bf997c647ba0590cb0b8a613f82"
  },
  "_from": "socketio-file-upload@",
  "_resolved": "https://registry.npmjs.org/socketio-file-upload/-/socketio-file-upload-0.2.7.tgz"
}
